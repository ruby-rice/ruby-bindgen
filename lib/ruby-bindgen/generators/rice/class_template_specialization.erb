<%- var_name = defined?(cruby_name) ? cruby_name : cursor.cruby_name -%>
<%- # Use typedef/using name if cursor is a typedef, otherwise generate from template -%>
<%- raw_name = if cursor.kind == :cursor_typedef_decl || cursor.kind == :cursor_type_alias_decl
                 cursor.spelling.camelize
               else
                 template_specialization.gsub(/<.*>/, "").split("::").last.camelize + template_arguments.split(",").map(&:strip).map { |t| t.gsub(/[^a-zA-Z0-9]/, " ").split.map(&:capitalize).join }.join
               end -%>
<%- ruby_class_name = @namer.apply_rename_types(raw_name) -%>
<%- parent_module = under ? under.cruby_name : "Rice::Module(rb_cObject)" -%>
Rice::Data_Type<<%= template_specialization %>> <%= var_name %> = <%= cursor_template.spelling %>_instantiate<<%= template_arguments %>>(<%= parent_module %>, "<%= ruby_class_name %>");
